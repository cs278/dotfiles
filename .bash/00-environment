# Standard environment settings

case $(hostname --domain) in
	*.kv-is.local|kv-is.local)
		EMAIL="chris.smith@widerplan.com"
	;;
	*.cs278.org|cs278.org)
		EMAIL="chris@cs278.org"
	;;
	*)
		echo "Unknown machine." >&2
	;;
esac

export NAME="Chris Smith";
export EMAIL;

# I'm a simpleton
export EDITOR="nano";

if [ -n "$DISPLAY" ];
then
	# If running inside a graphical session adjust some settings.

	if which google-chrome >/dev/null 2>&1;
	then
		# I prefer Chrome
		BROWSER=google-chrome
	elif which x-www-browser >/dev/null 2>&1;
	then
		# Fallback to system default
		BROWSER=x-www-browser
	fi
fi

if [ -n "$VISUAL" ];
then
	export VISUAL
fi

if [ -n "$BROWSER" ];
then
	export BROWSER
fi

# Ignore EOF until 3 key presses.
export IGNOREEOF="2"

# Set up language environment
export LANG=${LANG:-en_GB.UTF-8}

# Set up a safe TMPDIR
export TMPDIR="/tmp/$USER"

if [ ! -d "$TMPDIR" ];
then
	mkdir --mode=0700 --parents "$TMPDIR"
else
	chmod 0700 "$TMPDIR"
fi

# A number of programs create a $TMPDIR/$USER directory themselves
# create a symlink so they use the correct location.
if [ ! -s "$TMPDIR/$USER" ];
then
	ln -s . "$TMPDIR/$USER"
fi

# Pager settings
export LESS="--tabs=4 --RAW-CONTROL-CHARS"

# Make settings
if command -v cpu-cores > /dev/null 2>&1;
then
	export MAKEFLAGS="--jobs=$(( `cpu-cores` + 1 ))"
fi

# Default GnuPG keys
export GPG_SIGN=4EDDF2C7
export GPG_ENCRPYT=D4AA8EB1
